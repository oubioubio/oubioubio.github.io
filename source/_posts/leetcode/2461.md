---
title: 2461
date: 2025-12-11 05:39:41
categories: leetcode
tags: [C++]
---

# 2461
以下是完整的 C++ 代码：

```cpp
#include <iostream>
#include <vector>
#include <unordered_map>
#include <algorithm>

using namespace std;

class Solution {
public:
    long long maximumSubarraySum(vector<int>& nums, int k) {
        long long ans = 0, s = 0;
        unordered_map<int, int> cnt;
        /*统计当前窗口内每个元素的出现次数 */
        
        for (int i = 0; i < nums.size(); i++) {
            // 1. 进入窗口
            s += nums[i];
            cnt[nums[i]]++;

            int left = i - k + 1;
            if (left < 0) { // 窗口大小不足 k
                continue;
            }

            // 2. 更新答案
            if (cnt.size() >= k) {
                ans = max(ans, s);
            }

            // 3. 离开窗口
            int out = nums[left];
            s -= out;
            if (--cnt[out] == 0) {
                cnt.erase(out);
            }
        }

        return ans;
    }
};

int main() {
    cout << "开始执行测试用例..." << endl;
    Solution solution;

    // 测试用例 1：基础正数案例
    vector<int> nums1 = {1,5,4,2,9,9,9};
    int k1 = 3;
    long long res1 = solution.maximumSubarraySum(nums1, k1);
    cout << "测试用例 1: " << (res1 == 15 ? "通过" : "失败") 
         << "（预期：15，实际：" << res1 << "）" << endl;

    // // 测试用例 2：包含负数的案例
    // vector<int> nums2 = {2, -1, 3, -4, 1};
    // int k2 = 3;
    // long long res2 = solution.maxSum(nums2, k2);
    // cout << "测试用例 2: " << (res2 == 4 ? "通过" : "失败") 
    //      << "（预期：4，实际：" << res2 << "）" << endl;

    // // 测试用例 3：k 等于数组长度
    // vector<int> nums3 = {5, 1, 3};
    // int k3 = 3;
    // long long res3 = solution.maxSum(nums3, k3);
    // cout << "测试用例 3: " << (res3 == 9 ? "通过" : "失败") 
    //      << "（预期：9，实际：" << res3 << "）" << endl;

    // // 测试用例 4：全负数案例
    // vector<int> nums4 = {-5, -3, -2, -4};
    // int k4 = 2;
    // long long res4 = solution.maxSum(nums4, k4);
    // cout << "测试用例 4: " << (res4 == -5 ? "通过" : "失败") 
    //      << "（预期：-5，实际：" << res4 << "）" << endl;

    // // 测试用例 5：单元素数组（k=1）
    // vector<int> nums5 = {10};
    // int k5 = 1;
    // long long res5 = solution.maxSum(nums5, k5);
    // cout << "测试用例 5: " << (res5 == 10 ? "通过" : "失败") 
    //      << "（预期：10，实际：" << res5 << "）" << endl;

    return 0;
}
```
